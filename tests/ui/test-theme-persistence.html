<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Persistence Test</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div style="padding: 20px;">
        <h1>üîÑ Theme Persistence Test</h1>

        <div style="background: white; padding: 15px; border-radius: 8px; margin: 20px 0; border: 2px solid #ddd;">
            <h2>Test Steps:</h2>
            <ol>
                <li><strong>Set a theme:</strong> Click any theme below to change it</li>
                <li><strong>Refresh page:</strong> Press F5 or Ctrl+R</li>
                <li><strong>Verify:</strong> Theme should be applied immediately on page load</li>
                <li><strong>No settings required:</strong> Should work without opening settings panel</li>
            </ol>
        </div>

        <div id="currentThemeStatus"
            style="background: #f0f8ff; padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #0078d4;">
            <strong>Current Theme Status:</strong>
            <div id="themeInfo">Loading...</div>
        </div>

        <div class="color-theme-gallery">
            <h3>üé® Quick Theme Selection:</h3>
            <div class="theme-options" style="display: flex; gap: 10px; flex-wrap: wrap;">
                <div class="theme-option" data-theme="default"
                    style="cursor: pointer; border: 2px solid transparent; border-radius: 8px; padding: 5px;">
                    <div class="theme-preview-card">
                        <div class="theme-gradient default-theme"
                            style="width: 80px; height: 50px; border-radius: 4px;"></div>
                        <div style="text-align: center; font-size: 12px; margin-top: 4px;">Default</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="ocean"
                    style="cursor: pointer; border: 2px solid transparent; border-radius: 8px; padding: 5px;">
                    <div class="theme-preview-card">
                        <div class="theme-gradient ocean-theme" style="width: 80px; height: 50px; border-radius: 4px;">
                        </div>
                        <div style="text-align: center; font-size: 12px; margin-top: 4px;">Ocean</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="sunset"
                    style="cursor: pointer; border: 2px solid transparent; border-radius: 8px; padding: 5px;">
                    <div class="theme-preview-card">
                        <div class="theme-gradient sunset-theme" style="width: 80px; height: 50px; border-radius: 4px;">
                        </div>
                        <div style="text-align: center; font-size: 12px; margin-top: 4px;">Sunset</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="cosmic"
                    style="cursor: pointer; border: 2px solid transparent; border-radius: 8px; padding: 5px;">
                    <div class="theme-preview-card">
                        <div class="theme-gradient cosmic-theme" style="width: 80px; height: 50px; border-radius: 4px;">
                        </div>
                        <div style="text-align: center; font-size: 12px; margin-top: 4px;">Cosmic</div>
                    </div>
                </div>
                <div class="theme-option" data-theme="aurora"
                    style="cursor: pointer; border: 2px solid transparent; border-radius: 8px; padding: 5px;">
                    <div class="theme-preview-card">
                        <div class="theme-gradient aurora-theme" style="width: 80px; height: 50px; border-radius: 4px;">
                        </div>
                        <div style="text-align: center; font-size: 12px; margin-top: 4px;">Aurora</div>
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-top: 30px;">
            <button id="refreshBtn"
                style="background: #0078d4; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin-right: 10px;">
                üîÑ Simulate Page Refresh
            </button>
            <button id="clearTheme"
                style="background: #dc3545; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">
                üóëÔ∏è Clear Theme & Reset
            </button>
        </div>

        <div
            style="margin-top: 20px; background: #fff3cd; padding: 15px; border-radius: 8px; border: 1px solid #ffeaa7;">
            <strong>‚úÖ Success Criteria:</strong><br>
            ‚Ä¢ Theme applies immediately on page load<br>
            ‚Ä¢ No delay or flash of default theme<br>
            ‚Ä¢ Works without opening settings panel<br>
            ‚Ä¢ Theme persists across browser refresh
        </div>
    </div>

    <script>
        const themeGradients = {
            'default': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            'ocean': 'linear-gradient(135deg, #2E86AB 0%, #A23B72 100%)',
            'sunset': 'linear-gradient(135deg, #F18701 0%, #F35B04 100%)',
            'forest': 'linear-gradient(135deg, #134E5E 0%, #71B280 100%)',
            'cosmic': 'linear-gradient(135deg, #434343 0%, #000000 100%)',
            'aurora': 'linear-gradient(135deg, #00C9FF 0%, #92FE9D 100%)',
            'minimal': 'linear-gradient(135deg, #f7f7f7 0%, #e0e0e0 100%)',
            'dark': 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)'
        };

        function updateThemeStatus() {
            const savedTheme = localStorage.getItem('selectedColorTheme') || 'default';
            const currentBg = getComputedStyle(document.documentElement).getPropertyValue('--theme-background');
            const loadTime = performance.now();

            document.getElementById('themeInfo').innerHTML = `
                <strong>Saved Theme:</strong> ${savedTheme}<br>
                <strong>Applied CSS:</strong> ${currentBg.trim() || 'None'}<br>
                <strong>Load Time:</strong> ${loadTime.toFixed(2)}ms<br>
                <strong>Timestamp:</strong> ${new Date().toLocaleTimeString()}
            `;

            // Update selection
            document.querySelectorAll('.theme-option').forEach(option => {
                option.style.border = '2px solid transparent';
                if (option.getAttribute('data-theme') === savedTheme) {
                    option.style.border = '2px solid #0078d4';
                    option.style.background = '#f0f8ff';
                }
            });

            return savedTheme;
        }

        function applyTheme(themeName) {
            const gradient = themeGradients[themeName] || themeGradients['default'];
            document.documentElement.style.setProperty('--theme-background', gradient);
            localStorage.setItem('selectedColorTheme', themeName);
            console.log('Theme applied:', themeName);
            updateThemeStatus();
        }

        document.addEventListener('DOMContentLoaded', () => {
            console.log('Theme persistence test loaded');

            // Load and apply theme immediately (simulating the app behavior)
            const savedTheme = updateThemeStatus();
            applyTheme(savedTheme);

            // Add click handlers
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', () => {
                    const themeName = option.getAttribute('data-theme');
                    applyTheme(themeName);
                });
            });

            // Refresh simulation
            document.getElementById('refreshBtn').addEventListener('click', () => {
                location.reload();
            });

            // Clear theme
            document.getElementById('clearTheme').addEventListener('click', () => {
                localStorage.removeItem('selectedColorTheme');
                applyTheme('default');
            });

            console.log('Initial theme load completed in:', performance.now(), 'ms');
        });
    </script>
</body>

</html>
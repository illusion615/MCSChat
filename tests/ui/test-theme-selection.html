<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Selection Test</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div style="padding: 20px;">
        <h1>Theme Selection & Storage Test</h1>

        <div class="settings-section">
            <h3>üé® Color Theme Selection</h3>
            <p>Current theme should be stored and applied immediately</p>

            <!-- Current Theme Display -->
            <div class="current-theme-preview">
                <h4>Current Active Theme:</h4>
                <div class="theme-preview-card" id="currentThemePreview">
                    <div class="theme-gradient default-theme"></div>
                    <span class="theme-name">Default</span>
                </div>
                <div id="currentThemeInfo"
                    style="margin-top: 10px; font-family: monospace; background: #f0f0f0; padding: 10px; border-radius: 4px;">
                    Loading...
                </div>
            </div>

            <!-- Theme Options -->
            <div class="color-theme-gallery" style="margin-top: 20px;">
                <h4>Available Themes:</h4>
                <div class="theme-options">
                    <div class="theme-option selected" data-theme="default">
                        <div class="theme-preview-card">
                            <div class="theme-gradient default-theme"></div>
                            <span class="theme-name">Default</span>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="ocean">
                        <div class="theme-preview-card">
                            <div class="theme-gradient ocean-theme"></div>
                            <span class="theme-name">Ocean</span>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="sunset">
                        <div class="theme-preview-card">
                            <div class="theme-gradient sunset-theme"></div>
                            <span class="theme-name">Sunset</span>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="forest">
                        <div class="theme-preview-card">
                            <div class="theme-gradient forest-theme"></div>
                            <span class="theme-name">Forest</span>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="cosmic">
                        <div class="theme-preview-card">
                            <div class="theme-gradient cosmic-theme"></div>
                            <span class="theme-name">Cosmic</span>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="aurora">
                        <div class="theme-preview-card">
                            <div class="theme-gradient aurora-theme"></div>
                            <span class="theme-name">Aurora</span>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="minimal">
                        <div class="theme-preview-card">
                            <div class="theme-gradient minimal-theme"></div>
                            <span class="theme-name">Minimal</span>
                        </div>
                    </div>
                    <div class="theme-option" data-theme="dark">
                        <div class="theme-preview-card">
                            <div class="theme-gradient dark-theme"></div>
                            <span class="theme-name">Dark</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="margin-top: 30px;">
            <h3>Testing Instructions:</h3>
            <ol>
                <li>Click on any theme option above</li>
                <li>‚úÖ The background should change immediately</li>
                <li>‚úÖ The current theme preview should update</li>
                <li>‚úÖ The selection should be highlighted</li>
                <li>‚úÖ The theme should be stored in localStorage</li>
                <li>‚úÖ Refresh the page - theme should persist</li>
            </ol>

            <button id="refreshTest" style="margin-top: 10px; padding: 8px 16px;">
                üîÑ Refresh Test (simulated)
            </button>

            <button id="clearStorage"
                style="margin-top: 10px; padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 4px;">
                üóëÔ∏è Clear Stored Theme
            </button>
        </div>
    </div>

    <script>
        // Test theme selection functionality
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Theme selection test page loaded');

            const currentThemeInfo = document.getElementById('currentThemeInfo');
            const currentThemePreview = document.getElementById('currentThemePreview');

            // Theme gradients (matching the application)
            const themeGradients = {
                'default': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'ocean': 'linear-gradient(135deg, #2E86AB 0%, #A23B72 100%)',
                'sunset': 'linear-gradient(135deg, #F18701 0%, #F35B04 100%)',
                'forest': 'linear-gradient(135deg, #134E5E 0%, #71B280 100%)',
                'cosmic': 'linear-gradient(135deg, #434343 0%, #000000 100%)',
                'aurora': 'linear-gradient(135deg, #00C9FF 0%, #92FE9D 100%)',
                'minimal': 'linear-gradient(135deg, #f7f7f7 0%, #e0e0e0 100%)',
                'dark': 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)'
            };

            const themeNames = {
                'default': 'Default',
                'ocean': 'Ocean',
                'sunset': 'Sunset',
                'forest': 'Forest',
                'cosmic': 'Cosmic',
                'aurora': 'Aurora',
                'minimal': 'Minimal',
                'dark': 'Dark'
            };

            // Function to update current theme info
            function updateCurrentThemeInfo() {
                const savedTheme = localStorage.getItem('selectedColorTheme') || 'default';
                const cssVariable = getComputedStyle(document.documentElement).getPropertyValue('--theme-background');

                currentThemeInfo.innerHTML = `
                    <strong>Stored Theme:</strong> ${savedTheme}<br>
                    <strong>CSS Variable:</strong> ${cssVariable.trim() || 'Not set'}<br>
                    <strong>Timestamp:</strong> ${new Date().toLocaleTimeString()}
                `;

                return savedTheme;
            }

            // Function to apply theme
            function applyTheme(themeName) {
                const gradient = themeGradients[themeName] || themeGradients['default'];
                document.documentElement.style.setProperty('--theme-background', gradient);

                // Update current theme preview
                const themeGradient = currentThemePreview.querySelector('.theme-gradient');
                const themeNameEl = currentThemePreview.querySelector('.theme-name');

                if (themeGradient && themeNameEl) {
                    themeGradient.className = 'theme-gradient';
                    themeGradient.classList.add(`${themeName}-theme`);
                    themeNameEl.textContent = themeNames[themeName] || 'Unknown';
                }

                console.log('Applied theme:', themeName, 'Gradient:', gradient);
            }

            // Function to select theme
            function selectTheme(themeName) {
                console.log('Selecting theme:', themeName);

                // Update visual selection
                const themeOptions = document.querySelectorAll('.theme-option');
                themeOptions.forEach(option => {
                    option.classList.remove('selected');
                    if (option.getAttribute('data-theme') === themeName) {
                        option.classList.add('selected');
                    }
                });

                // Apply theme immediately
                applyTheme(themeName);

                // Store in localStorage
                localStorage.setItem('selectedColorTheme', themeName);

                // Update info display
                updateCurrentThemeInfo();
            }

            // Add click handlers to theme options
            const themeOptions = document.querySelectorAll('.theme-option');
            themeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    const themeName = option.getAttribute('data-theme');
                    selectTheme(themeName);
                });
            });

            // Refresh test button
            document.getElementById('refreshTest').addEventListener('click', () => {
                const savedTheme = updateCurrentThemeInfo();
                selectTheme(savedTheme);
                console.log('Simulated page refresh - theme restored:', savedTheme);
            });

            // Clear storage button
            document.getElementById('clearStorage').addEventListener('click', () => {
                localStorage.removeItem('selectedColorTheme');
                selectTheme('default');
                console.log('Theme storage cleared, reset to default');
            });

            // Initial load
            const initialTheme = updateCurrentThemeInfo();
            selectTheme(initialTheme);
        });
    </script>
</body>

</html>
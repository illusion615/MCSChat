<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Suggested Actions</title>
    <link rel="stylesheet" href="../styles.css">
</head>

<body>
    <div style="padding: 20px;">
        <h1>Test Suggested Actions</h1>

        <div id="suggestedActionsContainer"></div>

        <button onclick="testSuggestedActions()">Test Suggested Actions</button>
        <button onclick="clearSuggestedActions()">Clear Actions</button>

        <div id="output" style="margin-top: 20px; padding: 10px; background: #f0f0f0;"></div>
    </div>

    <script type="module">
        import { DOMUtils } from './src/utils/domUtils.js';
        import { Utils } from './src/utils/helpers.js';

        function log(message) {
            const output = document.getElementById('output');
            output.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
        }

        window.testSuggestedActions = function () {
            log('Testing suggested actions rendering...');

            const container = DOMUtils.getElementById('suggestedActionsContainer');
            if (!container) {
                log('ERROR: suggestedActionsContainer not found!');
                return;
            }

            log('Container found: ' + container.tagName);

            // Clear previous actions
            container.innerHTML = '';

            // Create test actions
            const testActions = [
                { title: 'Action 1', value: 'test action 1', type: 'imBack' },
                { title: 'Action 2', value: 'test action 2', type: 'imBack' },
                { title: 'Open URL', value: 'https://example.com', type: 'openUrl' }
            ];

            const actionsDiv = DOMUtils.createElement('div', {
                className: 'suggested-actions'
            });

            testActions.forEach((action, index) => {
                log(`Creating button ${index + 1}: ${action.title}`);

                const button = DOMUtils.createElement('button', {
                    className: 'suggestedAction',
                    dataset: { action: JSON.stringify(action) }
                }, Utils.escapeHtml(action.title));

                DOMUtils.addEventListener(button, 'click', () => {
                    log(`Clicked: ${action.title} (${action.value})`);
                });

                actionsDiv.appendChild(button);
            });

            container.appendChild(actionsDiv);
            log('Suggested actions rendered successfully!');
        };

        window.clearSuggestedActions = function () {
            const container = DOMUtils.getElementById('suggestedActionsContainer');
            if (container) {
                container.innerHTML = '';
                log('Suggested actions cleared');
            }
        };

        // Test on page load
        document.addEventListener('DOMContentLoaded', () => {
            log('Page loaded, ready for testing');
        });
    </script>
</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>SVG Icon Library - Management & Preview</title>
      <style>
            * {
                  margin: 0;
                  padding: 0;
                  box-sizing: border-box;
            }

            body {
                  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                  line-height: 1.6;
                  color: #333;
                  background: #f5f5f5;
            }

            .container {
                  max-width: 1400px;
                  margin: 0 auto;
                  background: white;
                  min-height: 100vh;
                  display: flex;
                  flex-direction: column;
            }

            .header {
                  background: linear-gradient(135deg, #667eea, #764ba2);
                  color: white;
                  padding: 1.5rem 2rem;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
            }

            .header h1 {
                  font-size: 1.8rem;
                  font-weight: 700;
            }

            .stats {
                  display: flex;
                  gap: 1rem;
                  align-items: center;
            }

            .stat-item {
                  background: rgba(255, 255, 255, 0.1);
                  padding: 0.5rem 1rem;
                  border-radius: 1rem;
                  font-size: 0.9rem;
            }

            .toolbar {
                  background: #fafbfc;
                  padding: 1rem 2rem;
                  border-bottom: 1px solid #e1e8ed;
                  display: flex;
                  gap: 1rem;
                  align-items: center;
                  flex-wrap: wrap;
            }

            .search-group {
                  display: flex;
                  gap: 0.5rem;
                  align-items: center;
            }

            .search-group label {
                  font-weight: 600;
                  color: #555;
            }

            input,
            select,
            button {
                  padding: 0.5rem 1rem;
                  border: 2px solid #e1e8ed;
                  border-radius: 6px;
                  font-size: 0.9rem;
                  transition: all 0.3s ease;
            }

            input:focus,
            select:focus {
                  outline: none;
                  border-color: #667eea;
                  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            }

            button {
                  background: linear-gradient(135deg, #667eea, #764ba2);
                  color: white;
                  border: none;
                  cursor: pointer;
                  font-weight: 600;
                  display: inline-flex;
                  align-items: center;
                  gap: 0.5rem;
            }

            button:hover {
                  transform: translateY(-1px);
                  box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
            }

            .main-content {
                  display: flex;
                  flex: 1;
                  overflow: hidden;
            }

            .left-panel {
                  flex: 1;
                  padding: 2rem;
                  overflow-y: auto;
            }

            .right-panel {
                  width: 400px;
                  background: #fafbfc;
                  border-left: 1px solid #e1e8ed;
                  padding: 2rem;
                  overflow-y: auto;
            }

            .section {
                  margin-bottom: 2rem;
            }

            .section h2 {
                  font-size: 1.5rem;
                  margin-bottom: 1rem;
                  color: #2c3e50;
                  border-bottom: 2px solid #667eea;
                  padding-bottom: 0.5rem;
            }

            .section h3 {
                  font-size: 1.2rem;
                  margin: 1rem 0 0.5rem 0;
                  color: #34495e;
            }

            .icon-grid {
                  display: grid;
                  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                  gap: 1rem;
                  margin-bottom: 2rem;
            }

            .icon-item {
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  padding: 1rem;
                  border: 2px solid #e1e8ed;
                  border-radius: 8px;
                  transition: all 0.3s ease;
                  cursor: pointer;
                  min-height: 100px;
            }

            .icon-item:hover {
                  border-color: #667eea;
                  transform: translateY(-2px);
                  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }

            .icon-item.selected {
                  border-color: #667eea;
                  background: #f0f4ff;
            }

            .icon-name {
                  margin-top: 0.5rem;
                  font-size: 0.85rem;
                  color: #333;
                  text-align: center;
                  font-weight: 600;
            }

            .icon-category {
                  font-size: 0.75rem;
                  color: #999;
                  margin-top: 0.25rem;
            }

            .preview-area {
                  background: white;
                  padding: 2rem;
                  border-radius: 8px;
                  border: 1px solid #e1e8ed;
                  margin-bottom: 1rem;
            }

            .size-controls {
                  display: flex;
                  gap: 0.5rem;
                  margin-bottom: 1rem;
                  flex-wrap: wrap;
            }

            .size-btn {
                  padding: 0.25rem 0.75rem;
                  font-size: 0.8rem;
                  background: white;
                  color: #667eea;
                  border: 2px solid #667eea;
            }

            .size-btn.active {
                  background: #667eea;
                  color: white;
            }

            .preview-icon {
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  min-height: 80px;
                  background: #f8f9fa;
                  border-radius: 8px;
                  margin: 1rem 0;
            }

            .code-preview {
                  background: #2d3748;
                  color: #e2e8f0;
                  padding: 1rem;
                  border-radius: 8px;
                  font-family: 'Monaco', 'Consolas', monospace;
                  font-size: 0.85rem;
                  overflow-x: auto;
                  margin-top: 1rem;
            }

            .log {
                  background: #2d3748;
                  color: #e2e8f0;
                  padding: 1rem;
                  border-radius: 8px;
                  font-family: 'Monaco', 'Consolas', monospace;
                  font-size: 0.8rem;
                  max-height: 300px;
                  overflow-y: auto;
                  margin-top: 1rem;
            }

            .log-entry {
                  margin: 0.25rem 0;
                  padding: 0.25rem 0;
            }

            .log-entry.info {
                  color: #63b3ed;
            }

            .log-entry.success {
                  color: #68d391;
            }

            .log-entry.warn {
                  color: #fbb046;
            }

            .log-entry.error {
                  color: #fc8181;
            }

            .control-group {
                  margin-bottom: 1rem;
            }

            .control-group label {
                  display: block;
                  margin-bottom: 0.5rem;
                  font-weight: 600;
                  color: #555;
            }

            .management-actions {
                  display: flex;
                  gap: 0.5rem;
                  flex-wrap: wrap;
                  margin-bottom: 1rem;
            }

            .management-actions button {
                  font-size: 0.8rem;
                  padding: 0.5rem 0.75rem;
            }

            @media (max-width: 768px) {
                  .main-content {
                        flex-direction: column;
                  }

                  .right-panel {
                        width: 100%;
                  }

                  .toolbar {
                        flex-direction: column;
                        align-items: stretch;
                  }

                  .search-group {
                        flex-direction: column;
                  }
            }
      </style>
</head>

<body>
      <div class="container">
            <div class="header">
                  <h1>üé® SVG Icon Library Manager</h1>
                  <div class="stats">
                        <div class="stat-item">Total: <span id="totalIcons">0</span></div>
                        <div class="stat-item">Displayed: <span id="displayedIcons">0</span></div>
                        <div class="stat-item">Categories: <span id="totalCategories">0</span></div>
                  </div>
            </div>

            <div class="toolbar">
                  <div class="search-group">
                        <label for="searchInput">üîç Search:</label>
                        <input type="text" id="searchInput" placeholder="Search icons..." />
                  </div>

                  <div class="search-group">
                        <label for="categoryFilter">üìÇ Category:</label>
                        <select id="categoryFilter">
                              <option value="">All Categories</option>
                        </select>
                  </div>

                  <div class="search-group">
                        <label for="sizeSelector">üìè Size:</label>
                        <select id="sizeSelector">
                              <option value="xs">XS (16px)</option>
                              <option value="small">Small (20px)</option>
                              <option value="medium" selected>Medium (24px)</option>
                              <option value="large">Large (28px)</option>
                              <option value="xl">XL (36px)</option>
                              <option value="xxl">XXL (48px)</option>
                        </select>
                  </div>

                  <button id="refreshBtn">üîÑ Refresh</button>
                  <button id="exportBtn">üì§ Export</button>
            </div>

            <div class="main-content">
                  <div class="left-panel">
                        <div class="section">
                              <h2>Icon Library</h2>
                              <div id="iconGrid" class="icon-grid">
                                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: #999;">
                                          Loading icons...
                                    </div>
                              </div>
                        </div>
                  </div>

                  <div class="right-panel">
                        <div class="section">
                              <h2>Icon Preview</h2>
                              <div class="preview-area">
                                    <div id="selectedIconName"
                                          style="font-weight: 600; margin-bottom: 1rem; color: #667eea;">
                                          Select an icon to preview
                                    </div>

                                    <div class="size-controls">
                                          <button class="size-btn" data-size="xs">XS</button>
                                          <button class="size-btn active" data-size="small">S</button>
                                          <button class="size-btn" data-size="medium">M</button>
                                          <button class="size-btn" data-size="large">L</button>
                                          <button class="size-btn" data-size="xl">XL</button>
                                          <button class="size-btn" data-size="xxl">XXL</button>
                                    </div>

                                    <div id="previewIcon" class="preview-icon">
                                          <div style="color: #999;">No icon selected</div>
                                    </div>

                                    <div id="iconInfo" style="display: none;">
                                          <strong>Category:</strong> <span id="iconCategoryInfo"></span><br>
                                          <strong>Available:</strong> <span id="iconAvailableInfo">‚úÖ Yes</span>
                                    </div>
                              </div>
                        </div>

                        <div class="section">
                              <h2>Management</h2>
                              <div class="management-actions">
                                    <button id="copyNameBtn" disabled>üìã Copy Name</button>
                                    <button id="copyCodeBtn" disabled>üíæ Copy Code</button>
                                    <button id="downloadBtn" disabled>üì• Download SVG</button>
                              </div>

                              <div class="control-group">
                                    <label for="codeTypeSelector">Code Generation:</label>
                                    <select id="codeTypeSelector">
                                          <option value="javascript">JavaScript</option>
                                          <option value="html">HTML</option>
                                          <option value="react">React</option>
                                          <option value="vue">Vue</option>
                                    </select>
                              </div>

                              <div id="codePreview" class="code-preview" style="display: none;">
                                    Select an icon to see code example
                              </div>
                        </div>

                        <div class="section">
                              <h2>Debug Console</h2>
                              <div class="management-actions">
                                    <button id="clearLogBtn">üóëÔ∏è Clear</button>
                                    <button id="testIconBtn">üß™ Test</button>
                                    <button id="debugInfoBtn">üîç Debug Info</button>
                              </div>
                              <div id="console" class="log">
                                    <div class="log-entry info">Ready to manage icons...</div>
                              </div>
                        </div>
                  </div>
            </div>
      </div>

      <script type="module">
            // Import the SVG Icon Library with correct imports
            import Icon, {
                  getAvailableIcons,
                  hasIcon,
                  createSVGIcon,
                  getIconCategory,
                  getIconsByCategory,
                  searchIcons
            } from '../index.js';

            // Global variables
            let currentSize = 'medium';
            let selectedIcon = null;
            let iconLibrary = [];
            let categories = new Set();

            // Initialize the application
            document.addEventListener('DOMContentLoaded', async () => {
                  log('üöÄ Initializing SVG Icon Library Manager...', 'info');

                  try {
                        // Test basic Icon functionality first
                        log('üîß Testing Icon manager...', 'info');
                        const testIcon = Icon.create('newChat', { size: '16px' });
                        if (testIcon) {
                              log('‚úÖ Icon.create() works!', 'success');
                        } else {
                              log('‚ùå Icon.create() returned null', 'error');
                        }

                        // Wait for icons to load
                        log('‚è≥ Waiting for icons to load...', 'info');
                        await Icon.waitForLoad();
                        log('‚úÖ Icons loaded!', 'success');

                        initializeApp();
                        setupEventListeners();
                        await loadIconLibrary();
                        updateStats();

                        log('‚úÖ Icon library manager ready!', 'success');
                  } catch (error) {
                        log(`‚ùå Initialization failed: ${error.message}`, 'error');
                        console.error('Full error:', error);
                  }
            });

            function initializeApp() {
                  log('üîç Getting available icons...', 'info');

                  // Test the Icon manager directly
                  log(`üì¶ Icon manager exists: ${!!Icon}`, 'info');
                  log(`üì¶ Icon.list exists: ${typeof Icon.list === 'function'}`, 'info');

                  // Try direct icon access
                  const iconList = Icon.list();
                  log(`üì¶ Icon.list() returned: ${iconList.length} icons`, 'info');
                  if (iconList.length > 0) {
                        log(`üì¶ First few icons: ${iconList.slice(0, 5).join(', ')}`, 'info');
                  }

                  // Get available icons through the wrapper function
                  iconLibrary = getAvailableIcons();
                  log(`üì¶ getAvailableIcons() returned ${iconLibrary.length} icons`, 'info');
                  if (iconLibrary.length > 0) {
                        log(`üì¶ First few from getAvailableIcons: ${iconLibrary.slice(0, 5).join(', ')}`, 'info');
                  }

                  // If no icons from getAvailableIcons, try direct access
                  if (iconLibrary.length === 0) {
                        log('‚ö†Ô∏è No icons from getAvailableIcons, trying direct access...', 'warning');
                        iconLibrary = Icon.list();
                        log(`üì¶ Using Icon.list() directly: ${iconLibrary.length} icons`, 'info');
                  }

                  // Extract categories
                  iconLibrary.forEach(iconName => {
                        const category = getIconCategory(iconName);
                        categories.add(category);
                  });

                  log(`üìÅ Found ${categories.size} categories: ${Array.from(categories).join(', ')}`, 'info');

                  // Populate category filter
                  const categoryFilter = document.getElementById('categoryFilter');
                  categories.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                        categoryFilter.appendChild(option);
                  });

                  log(`üì¶ Found ${iconLibrary.length} icons in ${categories.size} categories`, 'info');
            }

            function setupEventListeners() {
                  // Search and filter
                  document.getElementById('searchInput').addEventListener('input', loadIconLibrary);
                  document.getElementById('categoryFilter').addEventListener('change', loadIconLibrary);
                  document.getElementById('sizeSelector').addEventListener('change', (e) => {
                        currentSize = e.target.value;
                        loadIconLibrary();
                  });

                  // Toolbar buttons
                  document.getElementById('refreshBtn').addEventListener('click', () => {
                        location.reload();
                  });

                  document.getElementById('exportBtn').addEventListener('click', exportIconList);

                  // Preview size buttons
                  document.querySelectorAll('.size-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                              document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
                              e.target.classList.add('active');
                              updateIconPreview(e.target.dataset.size);
                        });
                  });

                  // Management buttons
                  document.getElementById('copyNameBtn').addEventListener('click', copyIconName);
                  document.getElementById('copyCodeBtn').addEventListener('click', copyIconCode);
                  document.getElementById('downloadBtn').addEventListener('click', downloadIconSVG);
                  document.getElementById('codeTypeSelector').addEventListener('change', updateCodePreview);

                  // Debug buttons
                  document.getElementById('clearLogBtn').addEventListener('click', clearLog);
                  document.getElementById('testIconBtn').addEventListener('click', testRandomIcon);
                  document.getElementById('debugInfoBtn').addEventListener('click', showDebugInfo);
            }

            async function loadIconLibrary() {
                  log('üîÑ Loading icon library...', 'info');

                  const iconGrid = document.getElementById('iconGrid');
                  iconGrid.innerHTML = '';

                  const searchTerm = document.getElementById('searchInput').value.toLowerCase();
                  const categoryFilter = document.getElementById('categoryFilter').value;

                  log(`üîç Filtering icons. Search: "${searchTerm}", Category: "${categoryFilter}"`, 'info');

                  let displayedCount = 0;
                  const filteredIcons = iconLibrary.filter(name => {
                        // Apply search filter
                        if (searchTerm && !name.toLowerCase().includes(searchTerm)) return false;

                        // Apply category filter
                        const category = getIconCategory(name);
                        if (categoryFilter && category !== categoryFilter) return false;

                        return true;
                  });

                  log(`üìä Filtered to ${filteredIcons.length} icons from ${iconLibrary.length} total`, 'info');

                  if (filteredIcons.length === 0) {
                        iconGrid.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: #999;">No icons found matching your criteria</div>';
                        updateStats(0);
                        return;
                  }

                  for (const name of filteredIcons) {
                        try {
                              const iconItem = document.createElement('div');
                              iconItem.className = 'icon-item';
                              iconItem.setAttribute('data-icon-name', name);
                              iconItem.addEventListener('click', () => selectIcon(name));

                              // Create icon
                              const icon = createIconElement(name, currentSize);

                              // Create labels
                              const nameLabel = document.createElement('div');
                              nameLabel.className = 'icon-name';
                              nameLabel.textContent = name;

                              const categoryLabel = document.createElement('div');
                              categoryLabel.className = 'icon-category';
                              categoryLabel.textContent = getIconCategory(name);

                              iconItem.appendChild(icon);
                              iconItem.appendChild(nameLabel);
                              iconItem.appendChild(categoryLabel);
                              iconGrid.appendChild(iconItem);
                              displayedCount++;
                        } catch (error) {
                              log(`‚ùå Error creating icon '${name}': ${error.message}`, 'error');
                        }
                  }

                  updateStats(displayedCount);
                  log(`‚úÖ Displayed ${displayedCount} icons`, 'success');
            }

            function createIconElement(iconName, size = 'medium') {
                  if (!hasIcon(iconName)) {
                        // Create placeholder for missing icons
                        const placeholder = document.createElement('div');
                        placeholder.style.cssText = `
                    width: 24px; 
                    height: 24px; 
                    background: #f0f0f0; 
                    border: 2px dashed #ccc; 
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 12px;
                    color: #999;
                `;
                        placeholder.textContent = '?';
                        return placeholder;
                  }

                  const sizeMap = {
                        xs: '16px',
                        small: '20px',
                        medium: '24px',
                        large: '28px',
                        xl: '36px',
                        xxl: '48px'
                  };

                  const iconSize = sizeMap[size] || '24px';
                  return Icon.create(iconName, { size: iconSize, color: 'currentColor' });
            }

            function selectIcon(iconName) {
                  selectedIcon = iconName;

                  // Update UI
                  document.querySelectorAll('.icon-item').forEach(item => {
                        item.classList.remove('selected');
                  });

                  const selectedItem = document.querySelector(`[data-icon-name="${iconName}"]`);
                  if (selectedItem) {
                        selectedItem.classList.add('selected');
                  }

                  // Update preview
                  document.getElementById('selectedIconName').textContent = iconName;
                  document.getElementById('iconCategoryInfo').textContent = getIconCategory(iconName);
                  document.getElementById('iconAvailableInfo').textContent = hasIcon(iconName) ? '‚úÖ Yes' : '‚ùå No';
                  document.getElementById('iconInfo').style.display = 'block';

                  // Enable management buttons
                  document.getElementById('copyNameBtn').disabled = false;
                  document.getElementById('copyCodeBtn').disabled = false;
                  document.getElementById('downloadBtn').disabled = false;

                  // Update preview icon
                  const activeSize = document.querySelector('.size-btn.active')?.dataset.size || 'medium';
                  updateIconPreview(activeSize);
                  updateCodePreview();

                  log(`üìå Selected icon: ${iconName}`, 'info');
            }

            function updateIconPreview(size = 'medium') {
                  if (!selectedIcon) return;

                  const previewContainer = document.getElementById('previewIcon');
                  previewContainer.innerHTML = '';

                  try {
                        const icon = createIconElement(selectedIcon, size);
                        previewContainer.appendChild(icon);
                  } catch (error) {
                        previewContainer.innerHTML = `<div style="color: #ff6b6b;">Error: ${error.message}</div>`;
                  }
            }

            function updateCodePreview() {
                  if (!selectedIcon) {
                        const codePreview = document.getElementById('codePreview');
                        codePreview.style.display = 'none';
                        return;
                  }

                  const codeType = document.getElementById('codeTypeSelector').value;
                  const codePreview = document.getElementById('codePreview');
                  codePreview.style.display = 'block';

                  let code = '';

                  switch (codeType) {
                        case 'javascript':
                              code = `// Import the icon manager
import Icon from '../index.js';

// Create the icon
const icon = Icon.create('` + selectedIcon + `', { 
    size: '24px', 
    color: 'currentColor' 
});

// Append to DOM
document.getElementById('container').appendChild(icon);`;
                              break;

                        case 'html':
                              code = `<!-- Include the icon manager script -->
<script type="module" src="../index.js"></script>

      <!-- Create a container for the icon -->
      <div id="icon-container"></div>

      <script type="module">
import Icon from '../index.js';
const icon = Icon.create('` + selectedIcon + `', { size: '24px' });
document.getElementById('icon-container').appendChild(icon);
      </script>`;
      break;

      case 'react':
      const reactComponentName = selectedIcon.charAt(0).toUpperCase() + selectedIcon.slice(1) + 'Icon';
      code = 'import React, { useEffect, useRef } from \'react\';\n' +
      'import Icon from \'../index.js\';\n\n' +
      'function ' + reactComponentName + '({ size = \'24px\', color = \'currentColor\' }) {\n' +
      ' const iconRef = useRef(null);\n' +
      ' \n' +
      ' useEffect(() => {\n' +
      ' if (iconRef.current) {\n' +
      ' const icon = Icon.create(\'' + selectedIcon + '\', { size, color });\n' +
      ' iconRef.current.appendChild(icon);\n' +
      ' }\n' +
      ' }, [size, color]);\n' +
      ' \n' +
      ' return
      <div ref={iconRef} />;\n' +
      '}\n\n' +
      'export default ' + reactComponentName + ';';
      break;

      case 'vue':
      const vueComponentName = selectedIcon.charAt(0).toUpperCase() + selectedIcon.slice(1) + 'Icon';
      code = `<template>
            <div ref="iconContainer"></div>
      </template>

      <script>
                import Icon from '../index.js';

                export default {
                  name: '${vueComponentName}',
                  props: {
                    size: { type: String, default: '24px' },
                    color: { type: String, default: 'currentColor' }
                  },
                  mounted() {
                    this.createIcon();
                  },
                  watch: {
                    size: 'createIcon',
                    color: 'createIcon'
                  },
                  methods: {
                    createIcon() {
                      this.$refs.iconContainer.innerHTML = '';
                      const icon = Icon.create('${selectedIcon}', {
                        size: this.size,
                        color: this.color
                      });
                      this.$refs.iconContainer.appendChild(icon);
                    }
                  }
                };
      </script>`;
      break;
      }

      codePreview.textContent = code;
      }

      function updateStats(displayed = null) {
      document.getElementById('totalIcons').textContent = iconLibrary.length;
      document.getElementById('totalCategories').textContent = categories.size;

      if (displayed !== null) {
      document.getElementById('displayedIcons').textContent = displayed;
      }
      }

      // Management functions
      async function copyIconName() {
      if (!selectedIcon) return;

      try {
      await navigator.clipboard.writeText(selectedIcon);
      log(`üìã Copied icon name: ${selectedIcon}`, 'success');
      } catch (error) {
      log(`‚ùå Failed to copy: ${error.message}`, 'error');
      }
      }

      async function copyIconCode() {
      if (!selectedIcon) return;

      const codeType = document.getElementById('codeTypeSelector').value;
      const code = document.getElementById('codePreview').textContent;

      try {
      await navigator.clipboard.writeText(code);
      log(`üíæ Copied ${codeType} code for: ${selectedIcon}`, 'success');
      } catch (error) {
      log(`‚ùå Failed to copy code: ${error.message}`, 'error');
      }
      }

      function downloadIconSVG() {
      if (!selectedIcon) return;

      try {
      const svgElement = Icon.create(selectedIcon, { size: '24px' });
      const svgString = svgElement.outerHTML;

      const blob = new Blob([svgString], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(blob);

      const link = document.createElement('a');
      link.href = url;
      link.download = `${selectedIcon}.svg`;
      link.click();

      URL.revokeObjectURL(url);
      log(`üì• Downloaded: ${selectedIcon}.svg`, 'success');
      } catch (error) {
      log(`‚ùå Download failed: ${error.message}`, 'error');
      }
      }

      function exportIconList() {
      const iconData = iconLibrary.map(name => ({
      name,
      category: getIconCategory(name),
      available: hasIcon(name)
      }));

      const json = JSON.stringify(iconData, null, 2);
      const blob = new Blob([json], { type: 'application/json' });
      const url = URL.createObjectURL(blob);

      const link = document.createElement('a');
      link.href = url;
      link.download = 'icon-library.json';
      link.click();

      URL.revokeObjectURL(url);
      log('üì§ Exported icon library data', 'success');
      }

      // Debug functions
      function clearLog() {
      document.getElementById('console').innerHTML = '<div class="log-entry info">Console cleared</div>';
      }

      function testRandomIcon() {
      const randomIcon = iconLibrary[Math.floor(Math.random() * iconLibrary.length)];
      selectIcon(randomIcon);
      log(`üß™ Testing random icon: ${randomIcon}`, 'info');
      }

      function showDebugInfo() {
      const info = {
      totalIcons: iconLibrary.length,
      categories: Array.from(categories),
      selectedIcon,
      iconManagerLoaded: !!Icon,
      hasIconFunction: typeof hasIcon === 'function',
      getAvailableIconsFunction: typeof getAvailableIcons === 'function'
      };

      log('üîç Debug Info:', 'info');
      log(JSON.stringify(info, null, 2), 'info');
      }

      // Logging function
      function log(message, type = 'info') {
      const console = document.getElementById('console');
      const entry = document.createElement('div');
      entry.className = `log-entry ${type}`;
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      console.appendChild(entry);
      console.scrollTop = console.scrollHeight;

      // Also log to browser console
      console[type === 'error' ? 'error' : 'log'](`[Icon Manager] ${message}`);
      }
      </script>
</body>

</html>